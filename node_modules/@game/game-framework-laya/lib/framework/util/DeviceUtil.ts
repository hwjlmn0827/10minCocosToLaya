
import Singleton from './Singleton';


/**
 * 设备处理类
 */
export default class DeviceUtil extends Singleton {

  private notchLength: number = 60;

  /**
   * 是否有刘海
   * 长宽比>1.99的手机都认为有刘海
   */
  public hasNotch(): boolean {
    if (Laya.stage.height/Laya.stage.width >= this.getNotchLengthWidthRate()){
      return true;
    }
    return false;
  }

  /**
   * 设置刘海高度
   * @param notchLength 刘海高度，默认为60
   */
  public setDefaultNotchLength(notchLength: number){
    this.notchLength = notchLength;
  }

  /**
   * 返回刘海高度
   */
  public getNotchLength(): number {
    if(Laya.stage.width > Laya.stage.height){
      if (Laya.stage.width/Laya.stage.height >= this.getNotchLengthWidthRate()){
        return this.notchLength;
      }
    }else{
      if (Laya.stage.height/Laya.stage.width >= this.getNotchLengthWidthRate()){
        return this.notchLength;
      }
    }
    return 0;
  }

  private getNotchLengthWidthRate(){
    if(process.env.miniprogram){
      return 1.8
    }
    return 1.99
  }
}
